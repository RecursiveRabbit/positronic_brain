=== Compaction Verification Test Started: 2025-04-25 15:54:33 ===
Model: TinyLlama/TinyLlama-1.1B-intermediate-step-1431k-3T
Context file: resume_context.bak
Num steps: 300
Initializing components...
Loading model: TinyLlama/TinyLlama-1.1B-intermediate-step-1431k-3T...
Initializing KV Mirror...
Initializing KV Patcher...
Loaded initial context: 3486 characters
Using model device: cuda:0
Initial context tokenized: 1019 tokens
Registering initial tokens with KV Mirror...
Priming KV cache with initial context...
KV cache initialized with 1019 tokens
KV Mirror stats: {'active_tokens': 1019, 'total_tokens': 1019}
Initialization complete.
Starting compaction test for 300 steps...
Loading diffuser model...
Diffuser model loaded for testing
Compactor task started.
[Progress] 0/300 tokens generated
[Progress] 10/300 tokens generated
[Progress] 20/300 tokens generated
[Progress] 30/300 tokens generated
[Progress] 40/300 tokens generated
[Progress] 50/300 tokens generated
[Progress] 60/300 tokens generated
[Progress] 70/300 tokens generated
[Progress] 80/300 tokens generated
[Progress] 90/300 tokens generated
[Progress] 100/300 tokens generated
[Progress] 110/300 tokens generated
[Progress] 120/300 tokens generated
[Progress] 130/300 tokens generated
[Progress] 140/300 tokens generated
[Progress] 150/300 tokens generated
[Progress] 160/300 tokens generated
[Progress] 170/300 tokens generated
[Progress] 180/300 tokens generated
[Progress] 190/300 tokens generated
[Progress] 200/300 tokens generated
[Progress] 210/300 tokens generated
[Progress] 220/300 tokens generated
[Progress] 230/300 tokens generated
[Progress] 240/300 tokens generated
[Progress] 250/300 tokens generated
[Progress] 260/300 tokens generated
[Progress] 270/300 tokens generated
[Progress] 280/300 tokens generated
[Progress] 290/300 tokens generated
Setting shutdown event...
Waiting for compactor to finish...


=== VERIFICATION TEST REPORT ===

Initial context length: 1019 tokens
Final context length: 1319 tokens
Total tokens generated: 300 tokens
Steps completed: 300/300
Final KV Mirror stats: {'active_tokens': 1319, 'total_tokens': 1319}
Event counts:
  Token generations: 300
  Token repairs: 0
  Token cullings: 0

Generated text (847 chars):
```
Alittleoveraweekago,Iwenttothelibrary,borrowedafewbooks,andstartedreading.I'vereadaboutvampires,aliens,andeventheUFOphenomenon.I'vealsoreadaboutwitches,mages,andmagic.I'vereadabouttheEgyptiangods,andtheNavajoIndian'screationstories.Oneday,I'mgoingtoreadabouttheMayan'screationstory,andmaybealittlebitaboutAtlantis.I'mreallyenjoyingmynewfoundknowledge,andIwanttoshareitwitheveryonearoundme.

Today,I'mgoingtostartbytalkingtomyfriends.We'regoingtohaveameeting.Iwon'tsaywhen...maybetomorrow?

I'mstillworkingonthejournal,andI'msureI'llfinishitsoonenough.I'mthinkingaboutgettingacomputer,onethatworksforme.Idon'twanttospendhundredsofdollarsonit,Ijustwanttobeabletorecordtheexperiments.

I'llkeepyouinformed-okay?Anyquestions,I'llanswerthem-okay?

"Wow,Ididn'texpectthat.""Sorry,man.Noproblem.Thisisallnewtome.""Thanks,man.Andthanksforcomingback."

I'm
```

Full text (last 1000 chars):
```
stairs...I'm not sure where I'm going our why, but Dad said I have to go on a journey. I'm not a violent kid, but I'll do anything to protect my family.
Alittleoveraweekago,Iwenttothelibrary,borrowedafewbooks,andstartedreading.I'vereadaboutvampires,aliens,andeventheUFOphenomenon.I'vealsoreadaboutwitches,mages,andmagic.I'vereadabouttheEgyptiangods,andtheNavajoIndian'screationstories.Oneday,I'mgoingtoreadabouttheMayan'screationstory,andmaybealittlebitaboutAtlantis.I'mreallyenjoyingmynewfoundknowledge,andIwanttoshareitwitheveryonearoundme.

Today,I'mgoingtostartbytalkingtomyfriends.We'regoingtohaveameeting.Iwon'tsaywhen...maybetomorrow?

I'mstillworkingonthejournal,andI'msureI'llfinishitsoonenough.I'mthinkingaboutgettingacomputer,onethatworksforme.Idon'twanttospendhundredsofdollarsonit,Ijustwanttobeabletorecordtheexperiments.

I'llkeepyouinformed-okay?Anyquestions,I'llanswerthem-okay?

"Wow,Ididn'texpectthat.""Sorry,man.Noproblem.Thisisallnewtome.""Thanks,man.Andthanksforcomingback."

I'm
```

Chronological event log (first 50 events):
Step 0: Added token 'A' (ID: 29909) at position 1019
Step 1: Added token 'little' (ID: 2217) at position 1020
Step 2: Added token 'over' (ID: 975) at position 1021
Step 3: Added token 'a' (ID: 263) at position 1022
Step 4: Added token 'week' (ID: 4723) at position 1023
Step 5: Added token 'ago' (ID: 8020) at position 1024
Step 6: Added token ',' (ID: 29892) at position 1025
Step 7: Added token 'I' (ID: 306) at position 1026
Step 8: Added token 'went' (ID: 3512) at position 1027
Step 9: Added token 'to' (ID: 304) at position 1028
Step 10: Added token 'the' (ID: 278) at position 1029
Step 11: Added token 'library' (ID: 3489) at position 1030
Step 12: Added token ',' (ID: 29892) at position 1031
Step 13: Added token 'borrow' (ID: 27942) at position 1032
Step 14: Added token 'ed' (ID: 287) at position 1033
Step 15: Added token 'a' (ID: 263) at position 1034
Step 16: Added token 'few' (ID: 2846) at position 1035
Step 17: Added token 'books' (ID: 8277) at position 1036
Step 18: Added token ',' (ID: 29892) at position 1037
Step 19: Added token 'and' (ID: 322) at position 1038
Step 20: Added token 'started' (ID: 4687) at position 1039
Step 21: Added token 'reading' (ID: 5183) at position 1040
Step 22: Added token '.' (ID: 29889) at position 1041
Step 23: Added token 'I' (ID: 306) at position 1042
Step 24: Added token ''' (ID: 29915) at position 1043
Step 25: Added token 've' (ID: 345) at position 1044
Step 26: Added token 'read' (ID: 1303) at position 1045
Step 27: Added token 'about' (ID: 1048) at position 1046
Step 28: Added token 'v' (ID: 325) at position 1047
Step 29: Added token 'amp' (ID: 1160) at position 1048
Step 30: Added token 'ires' (ID: 2658) at position 1049
Step 31: Added token ',' (ID: 29892) at position 1050
Step 32: Added token 'al' (ID: 394) at position 1051
Step 33: Added token 'iens' (ID: 11689) at position 1052
Step 34: Added token ',' (ID: 29892) at position 1053
Step 35: Added token 'and' (ID: 322) at position 1054
Step 36: Added token 'even' (ID: 1584) at position 1055
Step 37: Added token 'the' (ID: 278) at position 1056
Step 38: Added token 'U' (ID: 501) at position 1057
Step 39: Added token 'FO' (ID: 5800) at position 1058
Step 40: Added token 'phenomen' (ID: 27791) at position 1059
Step 41: Added token 'on' (ID: 265) at position 1060
Step 42: Added token '.' (ID: 29889) at position 1061
Step 43: Added token 'I' (ID: 306) at position 1062
Step 44: Added token ''' (ID: 29915) at position 1063
Step 45: Added token 've' (ID: 345) at position 1064
Step 46: Added token 'also' (ID: 884) at position 1065
Step 47: Added token 'read' (ID: 1303) at position 1066
Step 48: Added token 'about' (ID: 1048) at position 1067
Step 49: Added token 'w' (ID: 281) at position 1068
Detailed event log written to compaction_events.json

=== END OF REPORT ===
=== Compaction Verification Test Started: 2025-04-25 16:21:52 ===
Model: TinyLlama/TinyLlama-1.1B-intermediate-step-1431k-3T
Context file: resume_context.bak
Num steps: 300
Initializing components...
Loading model: TinyLlama/TinyLlama-1.1B-intermediate-step-1431k-3T...
Initializing KV Mirror...
Initializing KV Patcher...
Loaded initial context: 3486 characters
Using model device: cuda:0
Initial context tokenized: 1019 tokens
Registering initial tokens with KV Mirror...
Priming KV cache with initial context...
KV cache initialized with 1019 tokens
KV Mirror stats: {'active_tokens': 1019, 'total_tokens': 1019}
Initialization complete.
Starting compaction test for 300 steps...
Loading diffuser model...
Diffuser model loaded for testing
Compactor task started.
[Progress] 0/300 tokens generated
[Progress] 10/300 tokens generated
[Progress] 20/300 tokens generated
[Progress] 30/300 tokens generated
[Progress] 40/300 tokens generated
[Progress] 50/300 tokens generated
[Progress] 60/300 tokens generated
[Progress] 70/300 tokens generated
[Progress] 80/300 tokens generated
[Progress] 90/300 tokens generated
[Progress] 100/300 tokens generated
[Progress] 110/300 tokens generated
[Progress] 120/300 tokens generated
[Progress] 130/300 tokens generated
[Progress] 140/300 tokens generated
[Progress] 150/300 tokens generated
[Progress] 160/300 tokens generated
[Progress] 170/300 tokens generated
[Progress] 180/300 tokens generated
[Progress] 190/300 tokens generated
[Progress] 200/300 tokens generated
[Progress] 210/300 tokens generated
[Progress] 220/300 tokens generated
[Progress] 230/300 tokens generated
[Progress] 240/300 tokens generated
[Progress] 250/300 tokens generated
[Progress] 260/300 tokens generated
[Progress] 270/300 tokens generated
[Progress] 280/300 tokens generated
[Progress] 290/300 tokens generated
Setting shutdown event...
Waiting for compactor to finish...


=== VERIFICATION TEST REPORT ===

Initial context length: 1019 tokens
Final context length: 1319 tokens
Total tokens generated: 300 tokens
Steps completed: 300/300
Final KV Mirror stats: {'active_tokens': 1319, 'total_tokens': 1319}
Brightness stats for 1319 active tokens:
  Min: 255.00
  Max: 255.00
  Avg: 255.00
  Median: 255.00
Event counts:
  Token generations: 300
  Token repairs: 0
  Token cullings: 0

Generated text (1095 chars):
```
My mom is already waiting for me in the living room...she says she wanted to see if I knew who I am...or if I do, I want to know. She doesn't want me to leave her alone, she needs help too. My dad is still working through the basement, so he's not around.

When we first moved in, the basement was filled with stuff, including old furniture. We took out the furniture, and started over. I think it's a lot of work...I've never handled all this stuff before.

Yeah, so far I'm cleaning the basement, and going through the old books, looking for any references to the basement. It's pretty quiet down here, and I can hear every single noise from the outside world.

"There's no one around, so I can play music again." I'm playing 'Rock Around the Clock', it's a classic.

Hey, I remember when I was nine, I was in a band, and played at a local bar. We were going to open for a group called The Flying Bears, and the owner of the bar couldn't find anyone to fill in for them, so he offered us a gig. We agreed, and we did it. It was a blast, and I really enjoyed myself...we even played it twice...
```

Full text (last 1000 chars):
```
I am...or if I do, I want to know. She doesn't want me to leave her alone, she needs help too. My dad is still working through the basement, so he's not around.

When we first moved in, the basement was filled with stuff, including old furniture. We took out the furniture, and started over. I think it's a lot of work...I've never handled all this stuff before.

Yeah, so far I'm cleaning the basement, and going through the old books, looking for any references to the basement. It's pretty quiet down here, and I can hear every single noise from the outside world.

"There's no one around, so I can play music again." I'm playing 'Rock Around the Clock', it's a classic.

Hey, I remember when I was nine, I was in a band, and played at a local bar. We were going to open for a group called The Flying Bears, and the owner of the bar couldn't find anyone to fill in for them, so he offered us a gig. We agreed, and we did it. It was a blast, and I really enjoyed myself...we even played it twice...
```

Chronological event log (first 50 events):
Step 0: Added token 'My' (ID: 3421) at position 1019
  Brightness: 255.00
Step 1: Added token 'mom' (ID: 16823) at position 1020
  Brightness: 255.00
Step 2: Added token 'is' (ID: 338) at position 1021
  Brightness: 255.00
Step 3: Added token 'already' (ID: 2307) at position 1022
  Brightness: 255.00
Step 4: Added token 'waiting' (ID: 10534) at position 1023
  Brightness: 255.00
Step 5: Added token 'for' (ID: 363) at position 1024
  Brightness: 255.00
Step 6: Added token 'me' (ID: 592) at position 1025
  Brightness: 255.00
Step 7: Added token 'in' (ID: 297) at position 1026
  Brightness: 255.00
Step 8: Added token 'the' (ID: 278) at position 1027
  Brightness: 255.00
Step 9: Added token 'living' (ID: 8471) at position 1028
  Brightness: 255.00
Step 10: Added token 'room' (ID: 5716) at position 1029
  Brightness: 255.00
Step 11: Added token '...' (ID: 856) at position 1030
  Brightness: 255.00
Step 12: Added token 'she' (ID: 11360) at position 1031
  Brightness: 255.00
Step 13: Added token 'says' (ID: 4083) at position 1032
  Brightness: 255.00
Step 14: Added token 'she' (ID: 1183) at position 1033
  Brightness: 255.00
Step 15: Added token 'wanted' (ID: 5131) at position 1034
  Brightness: 255.00
Step 16: Added token 'to' (ID: 304) at position 1035
  Brightness: 255.00
Step 17: Added token 'see' (ID: 1074) at position 1036
  Brightness: 255.00
Step 18: Added token 'if' (ID: 565) at position 1037
  Brightness: 255.00
Step 19: Added token 'I' (ID: 306) at position 1038
  Brightness: 255.00
Step 20: Added token 'knew' (ID: 6363) at position 1039
  Brightness: 255.00
Step 21: Added token 'who' (ID: 1058) at position 1040
  Brightness: 255.00
Step 22: Added token 'I' (ID: 306) at position 1041
  Brightness: 255.00
Step 23: Added token 'am' (ID: 626) at position 1042
  Brightness: 255.00
Step 24: Added token '...' (ID: 856) at position 1043
  Brightness: 255.00
Step 25: Added token 'or' (ID: 272) at position 1044
  Brightness: 255.00
Step 26: Added token 'if' (ID: 565) at position 1045
  Brightness: 255.00
Step 27: Added token 'I' (ID: 306) at position 1046
  Brightness: 255.00
Step 28: Added token 'do' (ID: 437) at position 1047
  Brightness: 255.00
Step 29: Added token ',' (ID: 29892) at position 1048
  Brightness: 255.00
Step 30: Added token 'I' (ID: 306) at position 1049
  Brightness: 255.00
Step 31: Added token 'want' (ID: 864) at position 1050
  Brightness: 255.00
Step 32: Added token 'to' (ID: 304) at position 1051
  Brightness: 255.00
Step 33: Added token 'know' (ID: 1073) at position 1052
  Brightness: 255.00
Step 34: Added token '.' (ID: 29889) at position 1053
  Brightness: 255.00
Step 35: Added token 'She' (ID: 2296) at position 1054
  Brightness: 255.00
Step 36: Added token 'doesn' (ID: 1838) at position 1055
  Brightness: 255.00
Step 37: Added token ''' (ID: 29915) at position 1056
  Brightness: 255.00
Step 38: Added token 't' (ID: 29873) at position 1057
  Brightness: 255.00
Step 39: Added token 'want' (ID: 864) at position 1058
  Brightness: 255.00
Step 40: Added token 'me' (ID: 592) at position 1059
  Brightness: 255.00
Step 41: Added token 'to' (ID: 304) at position 1060
  Brightness: 255.00
Step 42: Added token 'leave' (ID: 5967) at position 1061
  Brightness: 255.00
Step 43: Added token 'her' (ID: 902) at position 1062
  Brightness: 255.00
Step 44: Added token 'alone' (ID: 7432) at position 1063
  Brightness: 255.00
Step 45: Added token ',' (ID: 29892) at position 1064
  Brightness: 255.00
Step 46: Added token 'she' (ID: 1183) at position 1065
  Brightness: 255.00
Step 47: Added token 'needs' (ID: 4225) at position 1066
  Brightness: 255.00
Step 48: Added token 'help' (ID: 1371) at position 1067
  Brightness: 255.00
Step 49: Added token 'too' (ID: 2086) at position 1068
  Brightness: 255.00
Detailed event log written to compaction_events.json

=== END OF REPORT ===
=== Compaction Verification Test Started: 2025-04-25 16:31:22 ===
Model: TinyLlama/TinyLlama-1.1B-intermediate-step-1431k-3T
Context file: resume_context.bak
Num steps: 100
Initializing components...
Loading model: TinyLlama/TinyLlama-1.1B-intermediate-step-1431k-3T...
Initializing KV Mirror...
Initializing KV Patcher...
Loaded initial context: 3486 characters
Using model device: cuda:0
Initial context tokenized: 1019 tokens
Registering initial tokens with KV Mirror...
Priming KV cache with initial context...
KV cache initialized with 1019 tokens
KV Mirror stats: {'active_tokens': 1019, 'total_tokens': 1019}
Initialization complete.
Starting compaction test for 100 steps...
Loading diffuser model...
Diffuser model loaded for testing
Compactor task started.
[Progress] 0/100 tokens generated
[Progress] 10/100 tokens generated
[Progress] 20/100 tokens generated
[Progress] 30/100 tokens generated
[Progress] 40/100 tokens generated
[Progress] 50/100 tokens generated
[Progress] 60/100 tokens generated
[Progress] 70/100 tokens generated
[Progress] 80/100 tokens generated
[Progress] 90/100 tokens generated
Setting shutdown event...
Waiting for compactor to finish...


=== VERIFICATION TEST REPORT ===

Initial context length: 1019 tokens
Final context length: 1119 tokens
Total tokens generated: 100 tokens
Steps completed: 100/100
Final KV Mirror stats: {'active_tokens': 1119, 'total_tokens': 1119}
Brightness stats for 1119 active tokens:
  Min: 255.00
  Max: 255.00
  Avg: 255.00
  Median: 255.00
Brightness Distribution:
  0-50: 0 tokens
  51-100: 0 tokens
  101-150: 0 tokens
  151-200: 0 tokens
  201-255: 1119 tokens
Event counts:
  Token generations: 100
  Token repairs: 0
  Token cullings: 0

Generated text (332 chars):
```
I take a deep breath...then I close my eyes and breathe in deeply. My heart races, my palms sweat, but I'm calm. I don't want to die...not yet. I'm trying to be strong, but I can't hide my fear. What if I fail? I have to try. I have to do it.

The house feels strange...the kitchen is still warm from last night...I grab my mother's
```

Full text (last 1000 chars):
```
sed to heal...and to harm. It lies dormant in most people, but I believe there are ways to awaken it. I'll record the results of my experiments here...I have to, for the sake of mankind. Password: Where is the God's tail? That which was left behind by the ship that soars the heavens"

That helps kind of, I'd better hold onto this-hey! You stupid rat! That's a weird looking rat...almost like it's possessed. A few whacks with my plastic bat later,and it scurried off, dropping the journal.

I carry the journal upstairs...I'm not sure where I'm going our why, but Dad said I have to go on a journey. I'm not a violent kid, but I'll do anything to protect my family.
I take a deep breath...then I close my eyes and breathe in deeply. My heart races, my palms sweat, but I'm calm. I don't want to die...not yet. I'm trying to be strong, but I can't hide my fear. What if I fail? I have to try. I have to do it.

The house feels strange...the kitchen is still warm from last night...I grab my mother's
```

Chronological event log (first 50 events):
Step 0: Added token 'I' (ID: 29902) at position 1019
  Brightness: 255.00
Step 1: Added token 'take' (ID: 2125) at position 1020
  Brightness: 255.00
Step 2: Added token 'a' (ID: 263) at position 1021
  Brightness: 255.00
Step 3: Added token 'deep' (ID: 6483) at position 1022
  Brightness: 255.00
Step 4: Added token 'breath' (ID: 16172) at position 1023
  Brightness: 255.00
Step 5: Added token '...' (ID: 856) at position 1024
  Brightness: 255.00
Step 6: Added token 'then' (ID: 6098) at position 1025
  Brightness: 255.00
Step 7: Added token 'I' (ID: 306) at position 1026
  Brightness: 255.00
Step 8: Added token 'close' (ID: 3802) at position 1027
  Brightness: 255.00
Step 9: Added token 'my' (ID: 590) at position 1028
  Brightness: 255.00
Step 10: Added token 'eyes' (ID: 5076) at position 1029
  Brightness: 255.00
Step 11: Added token 'and' (ID: 322) at position 1030
  Brightness: 255.00
Step 12: Added token 'bre' (ID: 2078) at position 1031
  Brightness: 255.00
Step 13: Added token 'at' (ID: 271) at position 1032
  Brightness: 255.00
Step 14: Added token 'he' (ID: 354) at position 1033
  Brightness: 255.00
Step 15: Added token 'in' (ID: 297) at position 1034
  Brightness: 255.00
Step 16: Added token 'deeply' (ID: 24344) at position 1035
  Brightness: 255.00
Step 17: Added token '.' (ID: 29889) at position 1036
  Brightness: 255.00
Step 18: Added token 'My' (ID: 1619) at position 1037
  Brightness: 255.00
Step 19: Added token 'heart' (ID: 5192) at position 1038
  Brightness: 255.00
Step 20: Added token 'races' (ID: 19830) at position 1039
  Brightness: 255.00
Step 21: Added token ',' (ID: 29892) at position 1040
  Brightness: 255.00
Step 22: Added token 'my' (ID: 590) at position 1041
  Brightness: 255.00
Step 23: Added token 'pal' (ID: 5112) at position 1042
  Brightness: 255.00
Step 24: Added token 'ms' (ID: 1516) at position 1043
  Brightness: 255.00
Step 25: Added token 'swe' (ID: 7901) at position 1044
  Brightness: 255.00
Step 26: Added token 'at' (ID: 271) at position 1045
  Brightness: 255.00
Step 27: Added token ',' (ID: 29892) at position 1046
  Brightness: 255.00
Step 28: Added token 'but' (ID: 541) at position 1047
  Brightness: 255.00
Step 29: Added token 'I' (ID: 306) at position 1048
  Brightness: 255.00
Step 30: Added token ''' (ID: 29915) at position 1049
  Brightness: 255.00
Step 31: Added token 'm' (ID: 29885) at position 1050
  Brightness: 255.00
Step 32: Added token 'calm' (ID: 21732) at position 1051
  Brightness: 255.00
Step 33: Added token '.' (ID: 29889) at position 1052
  Brightness: 255.00
Step 34: Added token 'I' (ID: 306) at position 1053
  Brightness: 255.00
Step 35: Added token 'don' (ID: 1016) at position 1054
  Brightness: 255.00
Step 36: Added token ''' (ID: 29915) at position 1055
  Brightness: 255.00
Step 37: Added token 't' (ID: 29873) at position 1056
  Brightness: 255.00
Step 38: Added token 'want' (ID: 864) at position 1057
  Brightness: 255.00
Step 39: Added token 'to' (ID: 304) at position 1058
  Brightness: 255.00
Step 40: Added token 'die' (ID: 762) at position 1059
  Brightness: 255.00
Step 41: Added token '...' (ID: 856) at position 1060
  Brightness: 255.00
Step 42: Added token 'not' (ID: 1333) at position 1061
  Brightness: 255.00
Step 43: Added token 'yet' (ID: 3447) at position 1062
  Brightness: 255.00
Step 44: Added token '.' (ID: 29889) at position 1063
  Brightness: 255.00
Step 45: Added token 'I' (ID: 306) at position 1064
  Brightness: 255.00
Step 46: Added token ''' (ID: 29915) at position 1065
  Brightness: 255.00
Step 47: Added token 'm' (ID: 29885) at position 1066
  Brightness: 255.00
Step 48: Added token 'trying' (ID: 1811) at position 1067
  Brightness: 255.00
Step 49: Added token 'to' (ID: 304) at position 1068
  Brightness: 255.00
Detailed event log written to compaction_events.json

=== END OF REPORT ===
